<!DOCTYPE html>
<html>
  <body>
    
    <p> api speed test </p>
<textarea name="text" id="urltext" cols="74" rows="1"></textarea>
    <br>
 <script>
   
var elem=document.getElementById('urltext')
var leoTime=0, promp='fat cat'
var leoWait=10, dims=512, leo
var leoApiKey
elem.value='Hello'
leoApiKey=prompt('enter key')
leonardo()
function leonardo(){

const options = {
  method: 'POST',
  headers: {
    accept: 'application/json',
    'content-type': 'application/json',
    authorization: `Bearer ${leoApiKey}`
  body: JSON.stringify({
    prompt: 'An oil painting of a cat',
    modelId: '6bef9f1b-29cb-40c7-b9df-32b51c1f67d3',
    width: 512,
    height: 512
  })
};






 
leo=""
fetch('https://cloud.leonardo.ai/api/rest/v1/generations', option1)
  .then(response => response.json())
  .then(data => {leo=data.sdGenerationJob.generationId
                urlElem.value="SeriesID "+leo
                leoTimer()})
  .catch(err => {alert('APIerror check key')
                 leoTime=0
 
                 elem.value="cccc"
                 }
                 );
}
function leoTimer(){
  if(leoTime<10){leoTime++;setTimeout(leoTimer,100);return}
  
  secondAPI()
}
function secondAPI(){
  urlElem.value='Fetching Image URLs'
 
  const option2 = {
  method: 'GET',
  headers: {
    accept: 'application/json',
    authorization: `Bearer ${leoApiKey}`
  }
};
   fetch('https://cloud.leonardo.ai/api/rest/v1/generations/'+leo, option2)
  .then(response => response.json())
  .then(data => {
     
    alert(data.generations_by_pk.generated_images[0].url)
    
    }
    
        
   </script>
  </body>
</html>
